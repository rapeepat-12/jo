<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Incremental Stats Game</title>
<style>
  body { background: #111; color: #eee; font-family: monospace; text-align: center; margin: 0; padding: 20px; }
  .stat { margin: 10px; padding: 10px; border: 1px solid #444; border-radius: 8px; background: #222; }
  button { background: #4caf50; border: none; color: white; padding: 10px; cursor: pointer; margin-top: 5px; border-radius: 5px; }
  button:hover { background: #45a049; }
</style>
</head>
<body>
<h1>Incremental Stats Game</h1>
<div id="stats"></div>
<div id="upgrades"></div>

<script>
const game = {
  stats: {},
  unlocked: ['a'],
  baseGain: 10,
  upgradeMultiplier: 1,
  upgradeCost: 100,
};

// Correct suffix list
function formatNumber(n) {
  if (!isFinite(n)) return '∞';
  if (n < 1000) return (Math.round(n * 100) / 100).toString();
  const suffixes = ['', 'K','M','B','T','Qd','Qn','Sx','Sp','Oc','No','De','Vt','Tg','qg','Qg','sg','Sg','Og','Ng','Ce'];
  const exp = Math.min(Math.floor(Math.log10(n) / 3), suffixes.length - 1);
  const mant = n / Math.pow(10, exp * 3);
  return (Math.round(mant * 100) / 100) + suffixes[exp];
}

// Generate next stat label (a→b→...→z→A→B→...→Z→aa→ab…)
function nextStatLabel(current) {
  const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
  function increment(label) {
    let i = label.length - 1;
    while (i >= 0) {
      const idx = chars.indexOf(label[i]);
      if (idx + 1 < chars.length) {
        return label.substring(0, i) + chars[idx + 1] + label.substring(i + 1);
      }
      label = label.substring(0, i) + chars[0] + label.substring(i + 1);
      i--;
    }
    return chars[0] + label;
  }
  return increment(current);
}

// Calculate required a to unlock next stat
function costToUnlock(stat) {
  const idx = Object.keys(game.stats).length;
  return Math.pow(10, idx * 3 + 3);
}

// Gain function
function gainStat(stat, amount) {
  game.stats[stat] = (game.stats[stat] || 0) + amount;
}

// Update display
function updateDisplay() {
  const container = document.getElementById('stats');
  container.innerHTML = '';
  game.unlocked.forEach(stat => {
    const div = document.createElement('div');
    div.className = 'stat';
    div.innerHTML = `
      <b>${stat}</b>: ${formatNumber(game.stats[stat] || 0)}<br>
      <button onclick="gainStat('${stat}', game.baseGain * game.upgradeMultiplier)">Gain ${stat}</button>
    `;
    container.appendChild(div);
  });

  // Upgrade section
  const upgrades = document.getElementById('upgrades');
  upgrades.innerHTML = `
    <button onclick="buyUpgrade()">Buy Upgrade (x2 all) Cost: ${formatNumber(game.upgradeCost)} a</button><br>
    <button onclick="unlockNextStat()">Unlock Next Stat</button>
  `;
}

// Upgrade
function buyUpgrade() {
  if ((game.stats['a'] || 0) >= game.upgradeCost) {
    game.stats['a'] -= game.upgradeCost;
    game.upgradeMultiplier *= 2;
    game.upgradeCost *= 10;
  }
}

// Unlock
function unlockNextStat() {
  const last = game.unlocked[game.unlocked.length - 1];
  const next = nextStatLabel(last);
  const cost = costToUnlock(next);
  if ((game.stats['a'] || 0) >= cost) {
    game.stats['a'] -= cost;
    game.unlocked.push(next);
    game.stats[next] = 0;
  }
}

// Automatic gain loop
setInterval(() => {
  // Every tick, each stat gains 3× its value (like multiplicative growth)
  game.unlocked.forEach(stat => {
    game.stats[stat] = (game.stats[stat] || 0) * 3 + game.baseGain * game.upgradeMultiplier;
  });
  updateDisplay();
}, 1000);

updateDisplay();
</script>
</body>
</html>
